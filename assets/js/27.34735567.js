(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{349:function(a,s,e){"use strict";e.r(s);var t=e(24),r=Object(t.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"关闭-selinux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭-selinux","aria-hidden":"true"}},[a._v("#")]),a._v(" 关闭 SELinux")]),a._v(" "),e("ArticleMeta"),a._v(" "),e("h2",{attrs:{id:"问题起源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题起源","aria-hidden":"true"}},[a._v("#")]),a._v(" 问题起源")]),a._v(" "),e("p",[a._v("\b\b"),e("code",[a._v("Redis")]),a._v(" 中的哨兵节点突然无法启动了，查看日志发现是没有权限信息。")]),a._v(" "),e("p",[a._v("经排查，发现是服务器重启过，"),e("code",[a._v("SELinux")]),a._v(" 处于强制模式，导致 "),e("code",[a._v("Redis")]),a._v(" 主节点进程无法修改哨兵节点的配置文件。")]),a._v(" "),e("p",[e("em",[a._v("不要用百度，百度根本查不多相关资料")])]),a._v(" "),e("h2",{attrs:{id:"selinux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#selinux","aria-hidden":"true"}},[a._v("#")]),a._v(" SELinux")]),a._v(" "),e("h3",{attrs:{id:"作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#作用","aria-hidden":"true"}},[a._v("#")]),a._v(" 作用")]),a._v(" "),e("p",[a._v("SELinux 主要作用就是最大限度地减小系统中服务进程可访问的资源（最小权限原则）。")]),a._v(" "),e("h3",{attrs:{id:"查看状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看状态","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看状态")]),a._v(" "),e("p",[a._v("执行命令 "),e("code",[a._v("getenforce")]),a._v(" 查看 SELinux 当前的模式。")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("getenforce\n")])])]),e("h3",{attrs:{id:"模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模式","aria-hidden":"true"}},[a._v("#")]),a._v(" 模式")]),a._v(" "),e("ul",[e("li",[a._v("enforcing：强制模式。违反 SELinux 规则的行为将被阻止并记录到日志中。")]),a._v(" "),e("li",[a._v("permissive：宽容模式。违反 SELinux 规则的行为只会记录到日志中。一般为调试用。")]),a._v(" "),e("li",[a._v("disabled：关闭")])]),a._v(" "),e("h3",{attrs:{id:"临时关闭"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#临时关闭","aria-hidden":"true"}},[a._v("#")]),a._v(" 临时关闭")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 临时关闭 SELinux（不需要重启服务器）")]),a._v("\nsetenforce "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),e("h3",{attrs:{id:"永久关闭"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#永久关闭","aria-hidden":"true"}},[a._v("#")]),a._v(" 永久关闭")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 永久关闭 SELinux（机器重启后会生效）")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"s/SELINUX=enforcing/SELINUX=disabled/g"')]),a._v(" /etc/selinux/config\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" -i "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"s/SELINUX=enforcing/SELINUX=disabled/g"')]),a._v(" /etc/sysconfig/selinux\n")])])])],1)},[],!1,null,null,null);s.default=r.exports}}]);